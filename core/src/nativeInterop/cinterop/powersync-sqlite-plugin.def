package = co.powersync.sqlite.core
headers = sqlite3.h stdio.h
linkerOpts = -lsqlite3
---

extern int sqlite3_powersync_init(sqlite3 *db, char **pzErrMsg,
                           const sqlite3_api_routines *pApi);

int init_powersync_sqlite_plugin() {
    int rc;

    rc = sqlite3_auto_extension((void (*)(void))&sqlite3_powersync_init);

    if (rc != SQLITE_OK) {
        fprintf(stderr, "Error loading PowerSync SQLite Extension\n");
    } else {
        fprintf(stdout, "Extension loaded successfully\n");
    }
}
